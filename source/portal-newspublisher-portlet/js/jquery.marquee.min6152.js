(function(a){a.fn.marquee=function(b){return this.each(function(){var W=a.extend({},a.fn.marquee.defaults,b),Q=a(this),aa,K,V,I,ah,ad=3,Y="animation-play-state",af=false,ab=function(g,d,h){var f=["webkit","moz","MS","o",""];for(var c=0;c<f.length;c++){if(!f[c]){d=d.toLowerCase()}g.addEventListener(f[c]+d,h,false)}},U=function(d){var c=[];for(var f in d){if(d.hasOwnProperty(f)){c.push(f+":"+d[f])}}c.push();return"{"+c.join(",")+"}"},ae=function(){Q.timer=setTimeout(z,W.delayBeforeStart)},H={pause:function(){if(af&&W.allowCss3Support){aa.css(Y,"paused")}else{if(a.fn.pause){aa.pause()}}Q.data("runningStatus","paused");Q.trigger("paused")},resume:function(){if(af&&W.allowCss3Support){aa.css(Y,"running")}else{if(a.fn.resume){aa.resume()}}Q.data("runningStatus","resumed");Q.trigger("resumed")},toggle:function(){H[Q.data("runningStatus")=="resumed"?"pause":"resume"]()},destroy:function(){clearTimeout(Q.timer);Q.find("*").andSelf().unbind();Q.html(Q.find(".js-marquee:first").html())}};if(typeof b==="string"){if(a.isFunction(H[b])){if(!aa){aa=Q.find(".js-marquee-wrapper")}if(Q.data("css3AnimationIsSupported")===true){af=true}H[b]()}return}var X={},ac;a.each(W,function(d,c){ac=Q.attr("data-"+d);if(typeof ac!=="undefined"){switch(ac){case"true":ac=true;break;case"false":ac=false;break}W[d]=ac}});W.duration=W.speed||W.duration;I=W.direction=="up"||W.direction=="down";W.gap=W.duplicated?parseInt(W.gap):0;Q.wrapInner('<div class="js-marquee"></div>');var D=Q.find(".js-marquee").css({"margin-right":W.gap,"float":"left"});if(W.duplicated){D.clone(true).appendTo(Q)}Q.wrapInner('<div style="width:100000px" class="js-marquee-wrapper"></div>');aa=Q.find(".js-marquee-wrapper");if(I){var ag=Q.height();aa.removeAttr("style");Q.height(ag);Q.find(".js-marquee").css({"float":"none","margin-bottom":W.gap,"margin-right":0});if(W.duplicated){Q.find(".js-marquee:last").css({"margin-bottom":0})}var G=Q.find(".js-marquee:first").height()+W.gap;W.duration=(parseInt(G,10)+parseInt(ag,10))/parseInt(ag,10)*W.duration}else{ah=Q.find(".js-marquee:first").width()+W.gap;K=Q.width();W.duration=(parseInt(ah,10)+parseInt(K,10))/parseInt(K,10)*W.duration}if(W.duplicated){W.duration=W.duration/2}if(W.allowCss3Support){var J=document.body||document.createElement("div"),j="marqueeAnimation-"+Math.floor(Math.random()*10000000),F="Webkit Moz O ms Khtml".split(" "),e="animation",t="",P="";if(J.style.animation){P="@keyframes "+j+" ";af=true}if(af===false){for(var Z=0;Z<F.length;Z++){if(J.style[F[Z]+"AnimationName"]!==undefined){var B="-"+F[Z].toLowerCase()+"-";e=B+e;Y=B+Y;P="@"+B+"keyframes "+j+" ";af=true;break}}}if(af){t=j+" "+W.duration/1000+"s "+W.delayBeforeStart/1000+"s infinite "+W.css3easing;Q.data("css3AnimationIsSupported",true)}}var R=function(){aa.css("margin-top",W.direction=="up"?ag+"px":"-"+G+"px")},q=function(){aa.css("margin-left",W.direction=="left"?K+"px":"-"+ah+"px")};if(W.duplicated){if(I){aa.css("margin-top",W.direction=="up"?ag:"-"+(G*2-W.gap)+"px")}else{aa.css("margin-left",W.direction=="left"?K+"px":"-"+(ah*2-W.gap)+"px")}ad=1}else{if(I){R()}else{q()}}var z=function(){if(W.duplicated){if(ad===1){W._originalDuration=W.duration;if(I){W.duration=W.direction=="up"?W.duration+ag/(G/W.duration):W.duration*2}else{W.duration=W.direction=="left"?W.duration+K/(ah/W.duration):W.duration*2}if(t){t=j+" "+W.duration/1000+"s "+W.delayBeforeStart/1000+"s "+W.css3easing}ad++}else{if(ad===2){W.duration=W._originalDuration;if(t){j=j+"0";P=a.trim(P)+"0 ";t=j+" "+W.duration/1000+"s 0s infinite "+W.css3easing}ad++}}}if(I){if(W.duplicated){if(ad>2){aa.css("margin-top",W.direction=="up"?0:"-"+G+"px")}V={"margin-top":W.direction=="up"?"-"+G+"px":0}}else{R();V={"margin-top":W.direction=="up"?"-"+aa.height()+"px":ag+"px"}}}else{if(W.duplicated){if(ad>2){aa.css("margin-left",W.direction=="left"?0:"-"+ah+"px")}V={"margin-left":W.direction=="left"?"-"+ah+"px":0}}else{q();V={"margin-left":W.direction=="left"?"-"+ah+"px":K+"px"}}}Q.trigger("beforeStarting");if(af){aa.css(e,t);var d=P+" { 100%  "+U(V)+"}",c=a("style");if(c.length!==0){c.filter(":last").append(d)}else{a("head").append("<style>"+d+"</style>")}ab(aa[0],"AnimationIteration",function(){Q.trigger("finished")});ab(aa[0],"AnimationEnd",function(){z();Q.trigger("finished")})}else{aa.animate(V,W.duration,W.easing,function(){Q.trigger("finished");if(W.pauseOnCycle){ae()}else{z()}})}Q.data("runningStatus","resumed")};Q.bind("pause",H.pause);Q.bind("resume",H.resume);if(W.pauseOnHover){Q.bind("mouseenter mouseleave",H.toggle)}if(af&&W.allowCss3Support){z()}else{ae()}})};a.fn.marquee.defaults={allowCss3Support:true,css3easing:"linear",easing:"linear",delayBeforeStart:1000,direction:"left",duplicated:false,duration:5000,gap:20,pauseOnCycle:false,pauseOnHover:false}})(jQuery);